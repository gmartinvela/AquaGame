{% extends "base.html" %}

{% block title %}Index{% endblock %}

{% block content %} 

  {% load staticfiles %}
  <body>

  <style>
  #droppable { height: 150px; }
  .ball_properties { position: relative; z-index: 99; }
  </style>

  <div id="right_span_master" class="row-fluid">

    <div id="right_span_main" class="col-12 col-sm-12 col-lg-4 col-offset-1 panel panel-info" tabindex="0">
      <div class="panel-heading">
        <button id="new_game" type="button" class="btn btn-default pull-right">New game</button>
        <h3 class="panel-title">Balls</h3>
      </div>
      <div id="span_ball_blue" class="col-3 col-sm-3 col-lg-3">
        <div id="ball_blue" class="ui-widget-content">
          <p><center><img src="{% static "img/ball_blue.png" %}" width= "100%" class="ball_properties"/></center></p>
          <p><center><b><span class="ball_properties">AGUA</span></b></center></p>
        </div>
      </div>
      <div id="span_ball_purple" class="col-3 col-sm-3 col-lg-3">
        <div id="ball_purple" class="ui-widget-content">
          <p><center><img src="{% static "img/ball_purple.png" %}" width= "100%" class="ball_properties"/></center></p>
          <p><center><b><span class="ball_properties">ALCOHOL</span></b></center></p>
        </div>
      </div>
      <div id="span_ball_yellow" class="col-3 col-sm-3 col-lg-3">
        <div id="ball_yellow" class="ui-widget-content">
          <p><center><img src="{% static "img/ball_yellow.png" %}" width= "100%" class="ball_properties"/></center></p>
          <p><center><b><span class="ball_properties">GASOLINA</span></b></center></p>
        </div>
      </div>
      <div id="span_ball_white" class="col-3 col-sm-3 col-lg-3">
        <div id="ball_white" class="ui-widget-content">
          <p><center><img src="{% static "img/ball_white.png" %}" width= "100%" class="ball_properties"/></center></p>
          <p><center><b><span class="ball_properties">AIRE</span></b></center></p>
        </div>
      </div>
    </div>
   
    <div id="left_span_0" class="col-12 col-sm-12 col-lg-5 col-offset-1 panel panel-primary">
      <div class="panel-heading">
        <!--<button id="review_0" type="button" class="btn btn-default pull-right">Review</button>-->
        <h3 class="panel-title">Drop the balls here</h3> 
      </div>
      <div id="droppable_0" class="ui-widget-content col-3 col-sm-3 col-lg-3">
        <p><center><img src="{% static "img/ball_shell_hover_question.png" %}" width= "100%"/></center></p>
        <!--<p id="debug_text_0"><center><span>Texto para debug</span></center></p>-->
      </div>
      <div id="droppable_1" class="ui-widget-content col-3 col-sm-3 col-lg-3">
        <p><center><img src="{% static "img/ball_shell_hover_question.png" %}" width= "100%"/></center></p>
        <!--<p id="debug_text_1"><center><span>Texto para debug</span></center></p>-->
      </div>
      <div id="droppable_2" class="ui-widget-content col-3 col-sm-3 col-lg-3">
        <p><center><img src="{% static "img/ball_shell_hover_question.png" %}" width= "100%"/></center></p>
        <!--<p id="debug_text_2"><center><span>Texto para debug</span></center></p>-->
      </div>                  
      <div id="droppable_3" class="ui-widget-content col-3 col-sm-3 col-lg-3">
        <p><center><img src="{% static "img/ball_shell_hover_question.png" %}" width= "100%"/></center><p>
        <!--<p id="debug_text_3"><center><span>Texto para debug</span></center></p>-->
      </div>
      
        <!--<button type="button" class="btn btn-success btn-block"><b>Aciertos:</b>&nbsp;&nbsp;&nbsp;<span class="badge badge-big-custom">0</span>&nbsp;</button>
        <button type="button" class="btn btn-danger btn-block"><b>Errores:</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="badge badge-big-custom">0</span>&nbsp;</button>-->

    </div>
  
  </div>

  <div id="right_span_master" class="row">

   <div id="left_span_1" class="col-12 col-sm-12 col-lg-5 col-offset-6 panel panel-info">
      <div class="panel-heading">
        <!--<button id="review_0" type="button" class="btn btn-default pull-right">Review</button>-->
        <!--<h3 class="panel-title  disabled">Drop the balls here</h3>-->
        <h3 class="panel-title  disabled"></h3> 
      </div>
      <div id="droppable_0" class="ui-widget-content col-3 col-sm-3 col-lg-3">
        <!--<p><center><img src="{% static "img/ball_shell.png" %}" width= "100%"/></center></p>-->
        <p><center><img src=""/></center></p>
      </div>
      <div id="droppable_1" class="ui-widget-content col-3 col-sm-3 col-lg-3">
        <!--<p><center><img src="{% static "img/ball_shell.png" %}" width= "100%"/></center></p>-->
        <p><center><img src=""/></center></p>
      </div>
      <div id="droppable_2" class="ui-widget-content col-3 col-sm-3 col-lg-3">
        <!--<p><center><img src="{% static "img/ball_shell.png" %}" width= "100%"/></center></p>-->
        <p><center><img src=""/></center></p>
      </div>                  
      <div id="droppable_3" class="ui-widget-content col-3 col-sm-3 col-lg-3">
        <!--<p><center><img src="{% static "img/ball_shell.png" %}" width= "100%"/></center></p>-->
        <p><center><img src=""/></center></p>
      </div>
      
        <!--<button type="button" class="btn btn-success btn-block"><b>Aciertos:</b>&nbsp;&nbsp;&nbsp;<span class="badge badge-big-custom">0</span>&nbsp;</button>
        <button type="button" class="btn btn-danger btn-block"><b>Errores:</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="badge badge-big-custom">0</span>&nbsp;</button>-->

    </div>

  </div>

  <div id="right_span" class="row">

   <div id="left_span_2" class="col-12 col-sm-12 col-lg-5 col-offset-6 panel panel-info">
      <div class="panel-heading">
        <button id="review_0" type="button" class="btn btn-default pull-right">Review</button>
        <h3 class="panel-title">Drop the balls here</h3> 
      </div>
      <div id="droppable_0" class="ui-widget-content col-3 col-sm-3 col-lg-3">
        <p><center><img src="{% static "img/ball_shell.png" %}" width= "100%"/></center></p>
        <!--<p id="debug_text_0"><center><span>Texto para debug</span></center></p>-->
      </div>
      <div id="droppable_1" class="ui-widget-content col-3 col-sm-3 col-lg-3">
        <p><center><img src="{% static "img/ball_shell.png" %}" width= "100%"/></center></p>
        <!--<p id="debug_text_1"><center><span>Texto para debug</span></center></p>-->
      </div>
      <div id="droppable_2" class="ui-widget-content col-3 col-sm-3 col-lg-3">
        <p><center><img src="{% static "img/ball_shell.png" %}" width= "100%"/></center></p>
        <!--<p id="debug_text_2"><center><span>Texto para debug</span></center></p>-->
      </div>                  
      <div id="droppable_3" class="ui-widget-content col-3 col-sm-3 col-lg-3">
        <p><center><img src="{% static "img/ball_shell.png" %}" width= "100%"/></center><p>
        <!--<p id="debug_text_3"><center><span>Texto para debug</span></center></p>-->
      </div>
      
        <!--<button type="button" class="btn btn-success btn-block"><b>Aciertos:</b>&nbsp;&nbsp;&nbsp;<span class="badge badge-big-custom">0</span>&nbsp;</button>
        <button type="button" class="btn btn-danger btn-block"><b>Errores:</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="badge badge-big-custom">0</span>&nbsp;</button>-->

    </div>

  </div>

    <!-- Modal -->
    <div class="modal fade" id="myModal">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title">Instrucciones del RETO!</h4>
          </div>
          <div class="modal-body">
            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
          </div>
          <!--<div class="modal-footer">
            <a href="#" class="btn btn-default">Close</a>
            <a href="#" class="btn btn-primary">Save changes</a>
          </div>-->
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->


<script>
ballsArray = [ "ball_blue", "ball_yellow", "ball_purple", "ball_white" ];
counter = 0;

$(function() {
  $('div[id^=ball_]').draggable({
    revert : function(event, ui) {
      $(this).data("uiDraggable").originalPosition = {
        top : 0, left : 0
      };
      return !event;
    }
  });
  
  $('div[id^=droppable_]').droppable({
    drop: function(event, ui) {
      //$(this).addClass("well well-small").find("span").html(ui.draggable.attr('id'));
      //$(this).find("img").attr('src', '{% static "img/ball_shell_hover_question.png" %}').addClass("ball_properties"); 
      //response = $(this).find("span").html(ui.draggable.attr('id'));
      ball_object = ui.draggable.attr('id');
      gap = $(this).attr('id');
      number = gap.charAt(10);
      counter = counter + parseInt(number);
      if (ballsArray[number] == ball_object) {
        $(this).find("img").attr('src', '{% static "img/ball_shell_hover_success.png" %}').addClass("ball_properties");
      } else {
        $(this).find("img").attr('src', '{% static "img/ball_shell_hover_danger.png" %}').addClass("ball_properties");
      }
      if (counter == 6){
        $('div[id^=droppable_]').droppable("destroy");
        $('div[id^=ball_0]').draggable({revert:true});
        //alert(ball_items);
        //for (var i = 0; i < ball_items.length; i++) {
        //  alert(ball_items[i]);
        //  ball_items[i].draggable({revert:true});
        //}
        counter = 0;
      }
    }
  });
});
</script>

<script>
//$("#new_game").click(function() {
  //$('div[id^=ball_]').attr('src', '{% static "img/ball_shell_hover_success.png" %}');
  //debug_texts = $('p[id^=debug_text_]');
  //for (var i = 0; i < debug_texts.length; i++) {
  //              debug_texts[i].style.visibility = 'hidden';
  //}
//});
</script>

<script type="text/javascript">

//    var myImageElement = document.getElementById('main_image');
//    setInterval(function() {
//     var myImageElement = document.getElementById('main_image');
//     myImageElement.src = 'http://www.weblab.deusto.es/webcam/proxied.py/aquarium1?rand=' + Math.random();
//    }, 600);

</script>

<script type="text/javascript"> 
    $('#myModal').modal('show');
</script>

{% endblock %}